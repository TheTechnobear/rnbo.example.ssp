# building 
This document covers creating/downloading a project , and then building it for the SSP.


# general workflow
There are three steps to build SSP modules, which must be completed in order.

a) setup the development environment 
done once, and overed in DEVENV.md

b) download/create project 
done once, per project, and covered in this document.

c) build project
done each time you want to build/create the modules for the SSP


note: you will need to ensure the build tools from the development enviroment are on your path.
(as covered in DEVENV.md)



Note: 
Specific directories and examples are mentioned in these documents.
however, most can be changed to your own requirements, with simple overrides.
but this is not covered extensively here, to keep things clear and simple.


-----

# download/create project using RNBO 

obviously we need to have some code to create a module :)
either we are going to create our own new code, or download an existing project.

lets cover the first.


notes:
Im not going to cover in any detail, the following   
- git, there are many guides on this
- c++ programming, dsp programming and related
(Id recommend the juce docs for a good starter here)



we first download the code from github, I suggest putting the code in a directory somewhere

e.g. 
```
mkdir ~/projects
cd ~/projects
```

now download the code
```
git clone https://github.com/thetechnobear/rnbo.example.ssp
```

change into this project directory
```
cd rnbo.example.ssp
```

now we need to download the code this repo is dependent on , which is JUCE and the ssp-sdk
this is simple
```
git submodule update --init --recursive
```

ok, congratulations... now we are all set to create our first module!



# building examples 


first we will just build the example that is included to get used to the build system.
(then we will create our own module :) )

### STEP 1 - prepare the build (examples)
assuming we are using the ssp-sdk examples as above
so are in `~/projects/ssp-sdk`

```
cd examples
mkdir build 
cd build 
cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_TOOLCHAIN_FILE=../xcSSP.cmake .. 
```



### STEP 2 - compile (examples) 

the moment we have been building up to...actually compiling the module! 

```
cmake --build . -- -j 4 
```

voila, we have build the modules

you will see that whilst building, it reports the targets... 
aka, the modules that you are going to want to copy to your SSP 





--- 

now the moment you have been waiting for... creating your very own modules ! 


# creating your OWN rnbo based modules ! 


### STEP 1 - create your MODULE
the first step, we need to do is to 'copy' this project to your new module

we can do this using the create modules script, this takes ONE parameter the NAME of your module
lets create one called TEST.



note: we assume you are in the TOP level directory for this to work
e.g. `~/projects/rnbo.example.ssp`

```
./scripts/create_module.sh TEST
```

Important Note : ONLY use a 4 LETTER CODE.... nothing longer, and you need it to be UNIQUE for your module!

this will create a directory called 
```
~/projects/rnbo.example.ssp/modules/TEST
```

see at the bottom of this document, to understand a little about what create_module.sh does.




### STEP 2 - export your RNBO code to your module.

so the above template will not DO anything, wont even compile! 

we need the code generated by RNBO.

so open MAX, create an RNBO patch, then export the code to 
```~/projects/rnbo.example.ssp/modules/TEST/rnbo-export```


using RNBO is beyond the scope of this document ;) 


### STEP 3a - prepare the build
this step only needs to be done once, each time you create a new module, as it prepares the build

we basically create a build directory (if it doesnt exist)
```
mkdir build 
cd build 
```

then we prepare the build files
```
cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_TOOLCHAIN_FILE=../xcSSP.cmake .. 
```


### STEP 3b - compiling our module
the moment of truth, we can now build our SSP module 
```
cd build 
cmake --build .
```

### STEP 4 - copy to SSP 
once the build is complete, it will tell you the location of the shared library (TEST.so) that has been built.
you can now copy this to the SSP sd card and place in plugins directory.


-----------------------------------------


# create_module.sh

what does this do? why might you want to review what happens?

the create modules script is very simple, it does 3 things

first, 
it copies the template project from template/rnbo.example.ssp to modules/your module name e.g. modules/TEST

second,
then we need to change the build details in modules 'makefile', in this example modules/TEST/CMakeLists.txt 
if you look at the template you will see XXXX as a placeholder for what we need to change.

finally, 
we add this new module to the list of modules that need to be built, by adding to modules/CMakeLists.txt
as the build will build all modules in modules/*


so why is this useful info?


first thing to understand is your module is a COPY of the template, you are free to change the code if you wish.
and so can have custom code for your module i.e. this is a STARTING point for your module.


second, if you EDIT modules/TEST/CMakeLists.txt, you can change a number of useful properties.. in particular the description.

finally... if you want to delete this project you can simply delete the modules/TEST directory.
but you also need to edit the modules/CMakeList.txt and remove
```
add_subdirectory(TEST)
```




